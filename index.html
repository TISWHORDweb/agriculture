<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Soil Tester</title>
    <link rel="stylesheet" href="/src/styles.css" />
  </head>
  <body>
    <!-- Wrap the Google Translate element in a container for better positioning -->
    <div id="google_translate_wrapper">
      <div id="google_translate_element"></div>
    </div>
    <div id="root"></div>

    <script type="text/javascript">
      function googleTranslateElementInit() {
        new google.translate.TranslateElement(
          { pageLanguage: 'en', includedLanguages: 'hi,ha,en,ig,yo,fr,ar' },
          'google_translate_element'
        );
      }

      // This function toggles the visibility of the translate dropdown
      function toggleTranslateDropdown(event) {
        var translateElement = document.getElementById("google_translate_element");
        if (translateElement.style.display === "block") {
          translateElement.style.display = "none";
        } else {
          translateElement.style.display = "block";
        }
        event.stopPropagation(); // Stop the click event from propagating to document
      }

      // Hide the translate dropdown when clicking outside of it
      function closeTranslateDropdown(event) {
        var translateElement = document.getElementById("google_translate_element");
        if (translateElement.style.display === "block" && !translateElement.contains(event.target) && !event.target.closest("#google_translate_wrapper")) {
          translateElement.style.display = "none";
        }
      }

      // Initialize the Google Translate element when the page loads
      window.onload = function() {
        // Attach the toggle function to the globe icon (pseudo-element)
        const globeIcon = document.getElementById("google_translate_wrapper");
        globeIcon.addEventListener("click", toggleTranslateDropdown);

        // Attach the closeTranslateDropdown function to close the dropdown when clicking outside of it
        document.addEventListener("click", closeTranslateDropdown);

        // Prevent the dropdown from closing when clicking inside the Google Translate dropdown
        const translateElement = document.getElementById("google_translate_element");
        translateElement.addEventListener("click", function(event) {
          event.stopPropagation();  // Stop propagation to prevent the dropdown from closing
        });
      };
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
<style>
  /* Style for the Google Translate wrapper */
#google_translate_wrapper {
  position: fixed; /* Fixed position to keep it in place */
  top: 10px; /* Position from the top */
  right: 10px; /* Position from the right */
  z-index: 1000; /* Ensure it stays on top of other elements */
  cursor: pointer; /* Make the globe icon clickable */
}

/* Initially hide the Google Translate dropdown */
#google_translate_element {
  display: none;
}

/* Style for the Google Translate dropdown */
.goog-te-combo {
  padding: 8px 12px; /* Add padding */
  border-radius: 4px; /* Rounded corners */
  border: 1px solid #ccc; /* Add a border */
  background-color: #f9f9f9; /* Light background */
  color: #333; /* Text color */
  font-size: 14px; /* Font size */
  cursor: pointer; /* Pointer cursor on hover */
}

/* Style for the Google Translate dropdown on hover */
.goog-te-combo:hover {
  background-color: #e9e9e9; /* Slightly darker background on hover */
}

/* Hide the Google Translate banner */
.goog-te-banner-frame{
  display: none;
}

/* Style for the Google Translate text */
.goog-te-gadget {
  color: transparent !important; /* Hide the default text */
}

/* Hide the Google Translate icon */
.goog-te-menu-value span, .VIpgJd-ZVi9od-l4eHX-hSRGPd {
  display: none; /* Hide the default icon */
}

/* Custom icon or text for the dropdown */
#google_translate_wrapper::before {
  content: "üåê"; /* Globe emoji */
  font-size: 20px;
  margin-right: 8px;
  display: inline-block;
}
</style>
